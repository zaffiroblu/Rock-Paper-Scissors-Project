<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Page Title</title>
  </head>
  <body>
    <script>
      // Here are some vars to keep track of the points for the human and for the computer.
      var humPoints = 0;
      var comPoints = 0;

      // This defines the available choices for both players.
      var gameArray = ["rock", "paper", "scissors"];

      function playRound() {
        // This lets the human input something.
        let humanPlay = prompt(
          "Heya! Let's play 'til someone gets 3 points.\nRock, paper, or scissors?"
        ).toLowerCase();

        // This logs the human's choice as a string (feedback text).
        console.log(`NEW ROUND: You've gone with ${humanPlay}.`);

        // This converts the choices (human to numbers.
        function convertPlay(input) {
          index = gameArray.indexOf(input);
          if (index === -1) {
            console.log(
              "Um, hang on... why didn't you choose rock, paper, or scissors?"
            );
          } else {
            return index;
          }
        }

        // This assigns a variable to the convertPlay function and input for the human's choice.
        let humResult = convertPlay(humanPlay);

        // This generates a random computer choice (as a number value,
        // 0, 1 or 2, since that is the number of items in the gameArray),
        let comResult = Math.floor(Math.random() * gameArray.length);

        // This converts the number from right above in comResult (0, 1, or 2) to the string in the gameArray
        // (that is, to the words "rock," "paper," or "scissors.")
        let computerPlay = gameArray[comResult];

        // This logs the computer's choice.
        console.log(`I've chosen ${computerPlay}.`);

        // This subtracts the computer's number result from the human's.
        let humMinusCom = humResult - comResult;

        // This is a switch function that returns who won the round.
        switch (humMinusCom) {
          case 0:
            console.log("This round is a draw.");
            break;
          case -2:
          case 1:
            console.log("You win this round!");
            humPoints += 1;
            break;
          case -1:
          case 2:
            console.log("I win this round!");
            comPoints += 1;
            break;
          default:
            console.log(
              "You're wasting my computing power. PLEASE choose either rock, paper, or scissors now."
            );
        }
      }

      // This is a loop that plays the function "playRound" until someone reaches 3 points,
      // and it also logs the score after each round.
      while (humPoints < 3 && comPoints < 3) {
        playRound();
        console.log(`The score is ${humPoints} to ${comPoints}.`);
      }

      // This is a function that announces the winner of the game.
      function endOfRound() {
        if (humPoints == 3) {
          console.log(
            "Yes indeed, you've gotten to 3 points before I could. You win the game! Congrats."
          );
        } else if (comPoints == 3) {
          console.log(
            "Well well well, it seems I've gotten to 3 points before you. You lose the game! So sorry about that."
          );
        } else {
          console.log(
            "Um, sorry, looks like something went wrong. Refresh the page?"
          );
        }
      }

      endOfRound();
    </script>
  </body>
</html>
